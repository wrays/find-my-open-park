<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Find My Open Park</title>
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
  <style media="screen">
    body {
      padding: 0;
      margin: 0;
    }
    html, body, #map {
      height: 100%;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"> </div>
    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>
      //var map = L.map('map').setView([30.260, -97.770], 12);
      var map = L.map('map')
      L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
          attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
          maxZoom: 18,
          id: 'stefanwray.0di69o2o',
          accessToken: 'pk.eyJ1Ijoic3RlZmFud3JheSIsImEiOiJjaXBmdnl0bmUwMDAwdGxub2F5bTk2OG96In0.rk52OWFNs4iXGwcmoFMpBA'
      }).addTo(map);

    //TRAILS
      //var style = {fillColor: '#00cc00', color:'#00cc00'};

      //$.getJSON("./urban_trails.geojson",function(data){
        //L.geoJson(data, {style,
          //onEachFeature: function(feature, layer){

          //layer.bindPopup(feature.properties.build_stat)

        //}}).addTo(map);
      //});

    //PARKS
      // add style to polygons
      var style = {fillColor: '#FF8600', color:'#FF0000'};
      // load GeoJSON from an external file
      $.getJSON("./parks.geojson",function(data){
      // add GeoJSON layer to the map once the file is loaded
        L.geoJson(data,{style,
          onEachFeature: function(feature, layer){
          // reduce acres to 2 decimal places
          var acre = feature.properties.park_acres;
          acre = Math.round(acre*100)/100;
          // creat content for popup
          layer.bindPopup("<strong>" + feature.properties.park_name + "</strong><br/>" + "Type: " + feature.properties.park_type + "<br/>" + "Managed As: " + feature.properties.management + "<br/>" + "Acres: " + acre + "<br/>" + "Status: " + feature.properties.park_statu + "<br/>" + "Year Open: " + feature.properties.year_open + "<br/>" + "Address: " + feature.properties.street_num + " " + feature.properties.street_nam + " " + feature.properties.street_typ);
        }}).addTo(map);
      });

      function onLocationFound(e) {
          //var radius = e.accuracy / 2;
          L.marker(e.latlng).addTo(map)
          //.bindPopup("You are within " + radius + " meters from this point").openPopup();
          //L.circle(e.latlng, radius).addTo(map);
      }
      map.on('locationfound', onLocationFound);
      map.locate({setView: true, maxZoom: 16});
    </script>
</body>
</html>
